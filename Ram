<process name="EDE_Cloudwatch_Deliver_Logs">
  <!-- RULES (Must come first) -->
  <rule name="FILE_CONDITION">
    <condition>number(/ProcessData/FILE_COUNT) &lt; 10</condition>
  </rule>
  <rule name="IS_DUPLICATE_TRUE">
    <condition>/ProcessData/IS_DUPLICATE = 'true'</condition>
  </rule>
  <rule name="IS_DUPLICATE_FALSE">
    <condition>/ProcessData/IS_DUPLICATE = 'false'</condition>
  </rule>

  <!-- SINGLE TOP-LEVEL CONTAINER (wraps everything else) -->
  <sequence name="MainFlow">
    <!-- Sub-sequences moved INSIDE the container -->
    <sequence name="PerformInsert">...</sequence>
    <sequence name="SkipInsert">...</sequence>
    <sequence name="DoProcessing">...</sequence>

    <!-- Original main flow content -->
    <operation name="File System Adapter - Collect">...</operation>
    <operation name="Timestamp Utility">...</operation>
    <assign name="Initialize File Count">...</assign>
    <choice name="FileCountCheck">...</choice>
    <operation name="DoNothing">...</operation>
  </sequence>
</process>
